<?xml version="1.0" encoding="UTF-8"?>
<!-- ===================================================================== -->
<!--                                                                       -->
<!--  Log4j2 Configuration                                                  -->
<!--                                                                       -->
<!-- ===================================================================== -->

<!--
   | For more configuration information and examples see the Apache Log4j
   | website: https://logging.apache.org/log4j/2.x/manual/configuration.html
 -->

<Configuration name="PentahoKettle" status="ERROR" dest="out">

   <Appenders>

      <!-- ================================= -->
      <!-- Preserve messages in a local file -->
      <!-- ================================= -->

      <!-- A time/date based rolling appender -->
      <RollingFile name="PENTAHOFILE" fileName="logs/pdi.log" filePattern="'.'%d{yyyy-MM-dd}" append="false" bufferedIO="true" immediateFlush="true">
         <PatternLayout>
            <Pattern>%d %-5p [%c] %m%n</Pattern>
         </PatternLayout>
         <Policies>
            <OnStartupTriggeringPolicy />
            <SizeBasedTriggeringPolicy size="20 MB" />
            <TimeBasedTriggeringPolicy />
         </Policies>
         <DefaultRolloverStrategy max="1" fileIndex="min"/>
      </RollingFile>


      <!-- ================== -->
      <!-- Log4JDBC Appenders -->
      <!-- ================== -->
      <File name="sql-appender" fileName="logs/log4jdbc-sql.log" append="false">
         <PatternLayout>
            <Pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} &lt;%t&gt; %m%n%n</Pattern>
         </PatternLayout>
      </File>

      <File name="sql-timing-appender" fileName="logs/log4jdbc-sqltiming.log" append="false">
         <PatternLayout>
            <Pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} %m%n%n</Pattern>
         </PatternLayout>
      </File>

      <File name="jdbc-appender" fileName="logs/log4jdbc-jdbc.log" append="false">
         <PatternLayout>
            <Pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} %m%n</Pattern>
         </PatternLayout>
      </File>

      <File name="connection-appender" fileName="logs/log4jdbc-connection.log" append="false">
         <PatternLayout>
            <Pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} %m%n</Pattern>
         </PatternLayout>
      </File>

      <!-- ============================== -->
      <!-- Append messages to the console -->
      <!-- ============================== -->
      <Console name="PENTAHOCONSOLE">
         <ThresholdFilter level="INFO"/>
         <PatternLayout>
            <Pattern>%d{ABSOLUTE} %-5p [%c{1}] %m%n</Pattern>
         </PatternLayout>
      </Console>

      <RollingFile name="pdi-execution-appender" fileName="logs/pdi.log" filePattern="logs/pdi.%d{yyyy-MM-dd}.log"
                   append="false" bufferedIO="true" immediateFlush="true">
         <PatternLayout>
            <Pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} %-5p &lt;%t&gt; %m%n</Pattern>
         </PatternLayout>
         <Policies>
            <OnStartupTriggeringPolicy />
            <SizeBasedTriggeringPolicy size="20 MB" />
            <TimeBasedTriggeringPolicy />
         </Policies>
         <DefaultRolloverStrategy max="1" fileIndex="min"/>
      </RollingFile>
   </Appenders>

   <!-- ================ -->
   <!-- Limit categories -->
   <!-- ================ -->
   <Loggers>

      <!-- ================ -->
      <!-- Setup the Root category -->
      <!-- ======================= -->

      <Root level="ERROR">
         <!--appender-ref ref="PENTAHOCONSOLE"/>
         <appender-ref ref="PENTAHOFILE"/-->
      </Root>
   </Loggers>
</Configuration>
